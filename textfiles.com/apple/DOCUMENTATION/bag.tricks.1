
                    =======================================
                         Bag of Tricks Documentation
                    =======================================
                            Written by: The Phantom


WARNING!!! WARNING!!! WARNING!!!  Back up the disks  that  you  are
going to use INIT, ZAP, FIXCAT on or you are taking a big chance!

                    ::::::::::::::::::::::::::::::::::::::
                                    TRAX
                    ::::::::::::::::::::::::::::::::::::::


1.  Summary of TRAX commands

1.1  Analysis Mode commands

  Arrows  Select track to read.

  R       Read current track.

  N       Read next track.

  P       Read previous track.

  F       Toggle disk format (13 or 16 secs).

  V       Verify disk and display errors.

  A       Display address checksums.

  D       Display data checksums.

  0       Recalibrate and read track 0.

  S       Change slot/drive configuration

  X       Enter raw dump mode.

  ESC     Exit program.


2.  Raw Dump Commands

  ->      Scroll forward one line

  <-      Scroll back one line

  N       Scroll to next page

  P       Scroll to previous page

  B       Go to beginning of buffer

  E       Go to end of buffer

  C       Change search byte

  X       Return to analysis mode





                    ::::::::::::::::::::::::::::::::::::::
                                    INIT
                    ::::::::::::::::::::::::::::::::::::::


3.  Summary of INIT Functions

3.1  Disk sectoring

This value is the number of sectors per track. the options  are  13
or  16. A 16 sector selection will not work if you have an old disk
drive which has not been updated for 16 sectors per track.

3.2  Disk format

This is the type of operating system being used on  this  diskette.
for 13 sector both DOS and CP/M are available. For 16 sectors disks
DOS, CP/M and PASCAL are available (the  PASCAL  option  works  for
Apple Fortran).

3.3  Preserve data

This option will allow you to re-format a disk while preserving the
data on it.

3.4  Skew direction

This prompt indicates the direction of the skewing to be used.  The
options are ascending and descending. Ordinarily, DOS reads sectors
in descending order while CP/M and PASCAL read  them  in  ascending
order.

3.5  ???

TO 9, you could increase your disk speed up to 40%.

3.6  Slot

The number of the slot occupied by you disk controller.

3.7  Drive

The drive number of you disk drive.

3.8  Volume number

This is the  volume  number  that  will  be  used  to  format  your
diskette.  The  numbers  0-254  are available.  You can use this to
change a volume number.

3.9  Starting track

The track number which formating is to start.

3.10  Ending Track

The last track to be formated.

                    ::::::::::::::::::::::::::::::::::::::
                                     ZAP
                    ::::::::::::::::::::::::::::::::::::::


4.  The ZAP Program

 /EXP/    Moving the buffer cursor to the  ofset  given  by  /EXP/.
          /EXP/ may range in value from $00 to $FF (0-255)

 +|-/EXP/ (The symbols +|- means you can put a plus or  minus  sign
          at that point.) Move the cursor to a new offset, computed
          by adding or subtracting the  value  of  the  expression,
          /EXP/ EX. +257.

 R        Read    track    and     sector.     Used     in     this
          format..R/EXP1/,/EXP2/

 WRITE    Write  to  current  track  and  sector.  Used   in   this
          format...WRITE/EXP1/,/EXP2/

 N        Next track.

 P        Read previous sector.

 LC       Lower case.

 UC       Upper case.

 IMAGE    Sets the ASCII translation on the right hand side of  the
          screen so that minimal translation is done.

 ASCII    The opposite of IMAGE mode. ASCII is the defult.

 LOCK     Lock ZAP so no writing can be done.

 UNLOCK   Opposite of LOCK, undoes LOCK.

 DOS16    Informs ZAP the the disk has 16 sec format.

 DOS13    Self explanitory.

 CP/M     For CP/M disks.

 PASCAL   For PASCAL disks.

 OPEN     You can open a file like...OPEN"HELLO" and it  will  read
          the  VTOC  and find the track sector list and display the
          sectors c

 CLOSE    Closes an opened file.

 PRINT    Copies entire screen to printer.

Here is a list of all the ZAP commands including the ones i  didn't
metion.

 /EXP/              Set buffer cursor

 +/EXP/             Move forward in buffer, disk, or file

 -/EXP/             Move backward as above

 R/TRK/,/SEC/       Read track, sector

 R/REC/,BYT/        Read record, byte (open file)

 WRITE/TRK/,/SEC/   Writes track, sector

 WRITE/REC/,/BYT/   Same as above

 N                  Next sector

 P                  Previous sector

 %                  indirect read


5.  Buffer Modify Commands

 /STR/              Store string into buffer

 SET                Multiple store

 &                  Logical and operation

 O                  Logical OR operation

 X                  Logical Exclusive OR operation


6.  COMPARISON COMMANDS

 L                  Look for string.

 V                  verify strings matches buffer

 COMPARE/BUFFER/    Compare buffers.


7.  Option Switch Commands

 LC       Lowercase

 UC       Uppercase.

 IMAGE    Print char in image form.

 ASCII    Standard ascii translation.

 LOCK     Prevent write operations.

 UNLOCK   Allow write operations.

 DOS16    DOS 3.3

 DOS13    DOS 3.2 OR 3.1

 CPM      Use CPM skew table (16 sector).

 PASCAL   Use PASCAL skwe table.

 NOWRAP   Prevent disk or file wraparound


8.  File Commands

 OPEN     Open a file

 RLEN     Set record length

 CLOSE    Close file

 WHERE    Open file containing sector


9.  Printer Commands.

 PR#      Set printer slot number

 PRINT    Copy screen to printer

 DUMP     Dump sector(s) to printer

 IDUMP    Dump instructions to printer

 NOTE     Print comment line

 LOG      Log all changes

 NOLOG    Stop logging changes


10.  Buffer command

 #        Select buffer


11.  Macro Commands

 (/NAME//TEXT/)     Define macro

 /NAME/             Invoke macro

 //NAME/            Delete macro

 MACROS             List of all macros

 MSWAP              Swap macro table with buffer
H 1 "Label Commands"

  LABLES    Displays all labels

  =/NAME/   Define label

  //NAME/   Delete label

  /NAME/+/EXP/ Position to label plus expression

  LSWAP     Swap label trace with buffer


12.  Trace commands

 TRACE    Display trace table

 <        Back up in trace

 >        Advance in trace


13.  Miscellaneous Commands

 AT/EXP/         Position but do not read

 AT              Mark buffer empty

 S/x/,/y/        Set disk slot to (x) and ,drive to (y)

 ?/EXP/          Calculator

 I               Disassemble to screen

 LOOP/CNT/,/LOC/ Repeat line

 HELP/EXP/       Shows help screen

 VTOC            Reads DOS VTOC

 CAT             Read first catalog sector

 STATUS          Show ZAP status variables

 END             Exit ZAP


14.  Patching DOS using ZAP



14.1  Log note patch to aviod reload of language card

R0,9 D3 V8D00E0 D3:EAEAEA UNLOCK WRITE NOLOG

14.2  BRUN or EXEC the HELLO File

To BRUN
R0,D V06 42:34 UNLOCK WRITE NOLOG

To EXEC:
R0,D 42 V06 42:14 UNLOCK WRITE NOLOG

14.3  Removing the pause during a long CATALOG

R1,D VCE 43:60 UNLOCK WRITE NOLOG

14.4  Changing the HELLO File Name

R1,9 75:'THE NEW NAME' UNLOCK WRITE NOLOG

14.5  Put cursor on command which caused a DOS Err

UNLOCK
R1,5 FF V6C FF:4C WRITE
R1,6 00 V5E9D 00:DFBC WRITE
R0,6 DF:C625:::2022FC6C5E9D WRITE
NOLOG

14.6  Allow the Value of the L Keyword of a BSAVE to Exceed 32k

R1,8 63 VFF7F 63:FFFF UNLOCK WRITE
NOLOG


15.  FIXCAT

This is a self explanitory program.  But here are some notes

The way this program restores deleted files is that it goes looking
for track/sector lists. I found this program to be realy great.

First, if you have an I/O err, use INIT, while saving the data.  If
the  I/O  err  is on the catalog track. No problem! Just run FIXCAT
after using INIT and you can either start from scratch (warning!  I
have never done this so make a backup before using) or you can read
from present catalog. If you start from scratch  look  for  deleted
files and restore all that you can.





 
