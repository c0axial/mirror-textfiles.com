+               Documentation for DeskColor Control Panel v3.1

Here is a Control Panel that allows you to change the color of the IIGS desktop 
from the old periwinkle blue to any pattern or to a picture.  Whatever pattern
or picture you choose or create becomes the new desktop the next time you
power up the computer, close the Control Panel, or launch another application.

I want to thank Vince Cooper for reinspiring me to complete this project.
His article in Call A.P.P.L.E. got me back on the ball.  Look for the
source code for this utility.

Catch me as:

America Online:   DAVE L32 
GEnie:            D.LEFFLER
Snail Mail:       Dave Leffler 
                  14 I Cape Drive
                  Fort Walton Beach, FL 32548


+ Distribution:

This product is classified "Jesus-A-ware". It is the equivalent of FreeWare.
It is distributed the same as God's Love.  That means it's free to anyone
who'll accept it.  It will be given to anyone, regardless of who or what
you are or have been. It's not where you've been, but where you're going!

Everyone is free to use the "JesusAware" name.  Spreading the Gospel message
through Software.  This product is free.  Give it to everyone, even if
they don't have a computer!  This work is a labor of love for my Lord and
Savior Jesus Christ!  Just as knowing Christ gives you a colorful background,
this Control Panel gives your IIGS desktop a colorful background.


+ How to Install:

Copy the file "Color.CDev" to the "CDEVS" folder in the "SYSTEM" folder of your
boot disk.  You MUST do this with the Finder or another GS/OS compatible
utility program or it will not copy correctly.  It is an extended file.  The
NEXT time you open the Control Panel NDA, you'll see the "DeskColor" icon.
You do not have to reboot your computer!  If you experience problems with the
Control Panel NDA, you might want to delete the "CDEV.DATA" file found in the
"CDEVS" folder, since the NDA sometimes has problems when a new Control Panel is
installed.

To keep the same pattern/picture you are using now, (i.e., you're updating to
this new version) just open this Control Panel after you've installed it (select the 
DeskColor icon), then select another Control Panel or close the Control Panel NDA.  
Your pattern/picture is saved painlessly.  Again, if you experience problems with
the Control Panel NDA, you might want to delete the "CDEV.DATA" file found in
the "CDEVS" folder, since the NDA sometimes has problems when a new Control Panel is
installed.


+ How to Use it:

Fairly Simple!  The type of background can be found in the right hand menu,
just select the type you'd like to use for a desktop background. You'll notice
the current desktop type is displayed as the menu choice.  The three types
of backgrounds are Pattern, Graphic, and None.  "None" is fairly self-
explanatory.  It removes any desktop messages from the system, and also updates
the "FINDER.DEF" file on your boot disk to clean up the Finder's desktop.

Selecting the "Pattern" menu will display a pattern editor, if it was not
already active.  The pattern editor is divided into the following areas:

Upper Left:   Current pattern display   Upper Right:  Grid to design pattern
Lower Left:   Current color             Lower Right:  Color selection area

The scroll bar and two buttons below the current pattern display allow you
to move between multiple loaded patterns, insert a new pattern, or delete the 
displayed pattern.

Please try not to confuse loaded patterns and the file from which they came
from, and the system pattern.  There is only one system pattern and it is
saved (attached) to the Control Panel file whenever you close the Control
Panel.  Pattern files are only saved/updated when you select the "Save As .." 
commands.

To change the current color, click in the color selection area in the
color you'd like, you'll see the current color change.

To fill in the pattern grid with the current color, click in the current
color area, you'll notice the grid fill with that color and the pattern
area will also update to reflect this.

To change the pattern, click the the appropriate block on the grid, you'll
notice that block change to the current color and the pattern area will
show the updated pattern.  You may also drag here to "paint".

To temporarily change the current desktop to the current color, click in the
current pattern display.  I wouldn't suggest doing this in the Finder, because
it will cover up ALL the icons.  No big loss, just close all the windows, press 
"Open Apple A" to select all icons and it will pull them back to the top.  This 
will not actually send the new pattern into the system, but just change this 
desktop.  Unless you select "Revert" before you close the Control Panel, this 
temporary desktop will be replaced by the currently selected desktop.

If more than one pattern is currently loaded, the scroll bar can be used to
move between and select the different patterns.

If you would like to insert a new pattern, click in the "Ins" button or press the 
"clear" key.  A periwinkle blue pattern is inserted before the currently displayed
pattern.  You now have one more pattern contained in the loaded patterns.  The 
pattern file is not updated until you use a "Save As .." command.

If you would like to delete a pattern, use the scroll bar to select it, then click
in the "Del" button or press the "delete" key.  The currently displayed pattern
will be deleted from the loaded patterns and you'll be moved to the previous 
pattern.  If only one pattern was loaded, it will be cleared to periwinkle blue.
The pattern file is not updated until you use a "Save As .." command.

When you get a pattern you like, you can do several things with it.  You
could see it temporarily on the screen (try it out) by clicking the current
pattern display.  This will not actually send the new pattern into the system,
but just change this desktop.  If you don't do anything, your pattern will be
sent to the system becoming the system pattern and saved when you close the 
Control Panel NDA or DeskColor Control Panel.  You should see the new pattern 
on your desktop immediately.  If you were just editing a pattern, you could save
it to a pattern file.  Again a reminder, the pattern files are ONLY updated/saved
when you use a "Save As .." command.  The system pattern is updated when you
close the Control Panel.

To load a picture, select the "Graphic" menu item.  You'll be presented with a
Standard Get File Dialog.  The file may be of any SHR type; i.e., Screen
(PIC, $C0), PackBytes (PNT, $C1, aux $0000), PaintWorks (PNT, $C1, aux $0001),
Apple Preferred (PNT, $C1, aux $0002), or PaintWorks 640 mode (PNT, $C1, 
aux $8000).  You must keep in mind that the picture will be used for both 320
AND 640 mode, so it should be one that looks okay, even when the colors change.
I would suggest using my ShowPic NDA to see the pictures and/or modifying them
first if you don't know what they'll look like.  A pattern or some sort of
design/logo would work very well, but a portrait won't.  The new picture will
be drawn to the screen after you close the Control Panel.

The left hand menu is the command menu and it may not be needed.  The first
command "Open" will open a pattern or graphic file depending on the selected
desktop type.  This command is automatically selected when you select 'Graphic'
from the type menu.  When you load in the saved patterns, the file you choose
will be loaded.  You'll then see a dialog asking whether you want to cancel
loading the pattern file, replace the loaded patterns with the patterns from
the pattern file, or add the new patterns to the end of the currently loaded 
patterns.

The "New" command erases all patterns from memory except the one that is 
displayed.  When you next save, it will be a file with only one pattern.  
This command will not change the pattern currently displayed.  You would use 
this command if you load a pattern file of 60 patterns just to get one of them 
and then you want to save only that one pattern to a new file.  This command 
also reverses the effect of the 'Revert' command (works for graphics also).
You will notice this displayed with there is only one pattern loaded.

The "Save APF" and "Save PTRN" commands work similarly.  They each save the
currently loaded pattern(s) to a file.  You will get a Standard Dialog for 
saving a file.  If you loaded your patterns from a PaintWorks Graphic or 
other file, please don't replace it.  The preferred method of saving is in 
Apple Preferred Format (APF), however the PTRN option saves it as a binary 
file with the "PTRN" and number of patterns header (like Pattern // and 
Desktop Lord use).

Use the "Revert" command to prevent your new pattern/graphic from being sent
to the system.  Normally every time you close the Control Panel NDA or
DeskColor Control Panel, the selected desktop is sent to the system and saved on 
disk.  The Revert command can be used for backing out of an experimental editing
session or any time you change your mind.  HOWEVER, if you go back and
continue editing the pattern or select a new background type, you'll notice
the "Revert" command goes away.  The newly updated desktop will be then sent
to the system.  To reverse the effect of "Revert", you could select the "New"
command.

The "Update Init" command is used to save the currently select desktype to 
the DeskColor Temporary Init file.  The init file is much smaller to use,
but doesn't provide any way to edit the desktop.  I would suggest using it
only after you have decided which desktop you want to live with.  The
first desktop loaded will be the one used.  I would suggest only having
the Control Panel or Init active on your boot disk.  If you don't have enough 
space on your boot disk, get the Control Panel up running first (even if you 
have  to leave off all your favorite NDA's and Control Panels), select DeskColor 
Control Panel, choose a desktop, then Update the Init.  You may then remove the 
Control Panel from your boot disk and use the Init file.  The "Color.Init" file 
should be placed in the "SYSTEM.SETUP" folder in the "SYSTEM" folder of your 
boot disk.  Depending on the catalog order (not alphabetized order) of the 
"SYSTEM.SETUP" folder, the Control Panel (CDEV.INIT) or Init (Color.Init) 
whichever is first, will be the desktop used.  DeskColor DOES NOT update the 
desktop when booting if another utility has ALREADY set the desktop.  However, 
the desktop WILL be updated everytime you close the DeskColor Control Panel, 
unless you have selected the "Revert" command.

The menus should be fairly accurate.  The type menu ALWAYS displays the current
background type or the one you've requested.  The command menu will display
"Revert" until you select "New" or "Open" or draw in the pattern.  If you close
the Control Panel with either "New" or "Open" displayed, the new desktop is sent 
to the system.  If "Revert" is displayed, the desktop is not changed.  If you 
have selected "Pattern", "Open" means more than one pattern is loaded, and "New" 
means a single pattern is loaded.

Keep in mind that a picture message takes up 32K of memory and will also
take up almost as much disk space when saved. This makes the Control Panel file
grow up to 50K when you have selected a picture.  A pattern/color is 1000
times smaller to store.  To be honest a graphic desktop takes up over 64K of 
memory, so if you have memory shortage problems, use a pattern instead.


+ Known Quirks:

There is a big difference between the way 320 and 640 mode work.  You'll
notice that the colors change on pictures, but the shapes stay the same.
There are 16 colors in 320 mode and 4 colors and some mixes in 640 mode.
Patterns are also different.  In 320 mode a pattern is 8 points by 8 points
with 16 colors.  In 640 mode a pattern is 8 points by 8 points with 4
colors, but to get 16 mixed colors it goes to 4 points by 8 points.  You'll
notice the different displays when you bring up the editor in 320 mode
and 640 mode.  The 640 mode pattern is always the top half of the 320 mode 
pattern when switching.  Meaning, a box pattern drawn in one mode will be a 
uniquely odd pattern in the other mode with different colors.  When editing
a pattern in 640 mode a copy is placed in the bottom half of the pattern 
for 320 mode to create a symetrical pattern.  You may modify the bottom four
lines of the 320 mode pattern WITHOUT affecting the 640 mode pattern.  I
personnaly first create a good looking 640 mode pattern, save it, go to 320
mode and edit the bottom 4 rows for a good 320 mode pattern.

To obtain a consistent pattern in both 320 AND 640 mode (like Graffiti), use
your favoite paint program.  Select your pattern and fill the full screen, then
save that file.  You can then load that graphic file into DeskColor.  That's
basically how Graffiti does it, not with patterns, but with graphics.

Earlier versions of ProSel 16 (pre-8.54?) wipe out the desktop message
when launching a ProDOS 8 program.  Glen mistakedly used the same
message number as the desktop uses.  I would suggest updating to the
most current version of ProSel 16 anyway, especially if you are experiencing
any problems.

The Finder draws it's own desktop.  To get it updated, you may have to select,
then close DeskColor up to three times.  This should work with graphics, but
it is pretty picky when it comes to updating to a new pattern.  The easiest
way is to click in the current pattern area, which covers all the icons, then
Close All windows, then Select All to bring the icons to the front.

AppleWorks GS seems to have problems sometimes if you are using a picture.
I don't know if this only affects ROM 03 machines or other also.  I have
never had a problem with this myself.


+ Look for the source code somewhere nearby.  It's in ORCA/C v1.3 with
APW v1.1 Rez files and ORCA/M for the picture loading routines.

This program contains material from the ORCA/C
Run-Time Libraries, copyright 1987-1989
by Byte Works, Inc.  Used with permission


+ Future Additions:

- Ask!  You've got my addresses.