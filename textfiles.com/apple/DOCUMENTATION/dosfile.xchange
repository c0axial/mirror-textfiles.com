




               DFXX IS BROKEN VERSION OF DFX
               
               DOS FILE EXCHANGE [1.1]
               =======================
               
               PROGRAM BY BLACKSMITH 
               (C) 1982 BY ARROW MICRO SOFTWARE


INTRODUCTION
------------

DOS FILE EXCHANGE (DFX) is a program for transferring DOS 3.3
files between APPLE II computers that are equipped with the HAYES

MICROMODEM II*.

DFX supports an APPLE to APPLE terminal "CHAT" mode that allows
both ends to type messages to each other at the same time that
files are being transferred.


HARDWARE REQUIRED
-----------------

APPLE II 48K
APPLESOFT in ROM or LANGUAGE CARD
HAYES MICROMODEM II in slot 2
DISK II in slot 6

SOFTWARE REQUIRED
-----------------

DFX PRIMARY DISK
DOS 3.3 SYSTEM MASTER


INDEX
-----
HOW TO RUN DFX .....................2

ERROR HANDLING .....................4

LIMITATIONS ........................5

INTERNALS ..........................5

MAKING COPIES OF DFX ...............7



* Indicates trademark of Hayes Microcomputer Products. Inc.

APPLE is a registered trademark of APPLE COMPUTER INC.

HOW TO RUN DFX
--------------

LOADING THE PROGRAM
Run the program called DFX on the LOCAL and REMOTE APPLE II computers.
The  program  makes a quick check to see if the phone line has a clean
data carrier present, in which case DFX will accept the  current  call
and present the M-$-& menu. If no carrier is detected, DFX will hangup
the line and present the following C-& menu: 

C .... CALL ORIGINATION

& .... BOOT DRIVE 1


WAITING FOR CALL
The  "WAITING FOR CALL" message means that the system will auto-answer
the telephone if a RING is detected. 

PLACING THE CALL Type "C" to originate call. Then type  the  telephone
number of the other APPLE as requested and let DFX dial the number via
the  modem.  If an answer is received within 30 seconds, the call will
be connected and the following M-$-& menu presented. 

M .... MASTER MODE

$ .... HANGUP LINE

& .... BOOT DRIVE 1


CHAT MODE
A flashing cursor near the bottom left of the  screen  indicates  that
you  are  in  CHAT mode connection with the other APPLE. Likewise, the
REMOTE APPLE will be in in CHAT mode connection with you.  This  means
that  you  may  type messages to each other within a three line scroll
area just above the STATUS display line at the bottom of  the  screen.
All  the  non-control  characters  may  be typed, and in addition, the
control-G will ring the bell. The  LEFT  ARROW  key  will  backup  the
cursor as far as the left margin. 

FUNCTION MODE
To  select  any  of the MENU items, you must toggle your keyboard from
CHAT to FUNCTION mode by using the FORWARD ARROW key. 


THE STATUS DISPLAY
As you play with the CHAT-FUNCTION toggle, you will notice that at the
bottom right of the screen in the STATUS display there is a "C" or "F"
indicating the current state of the LOCAL APPLE. If the REMOTE  starts
to  toggle  his CHAT-FUNCTION state, you will see his current state at
the left of the STATUS display. 

HANGING UP THE LINE
Selecting "$" will hangup the  telephone  line  and  within  about  15
seconds,  both  APPLES  will  reset  to  the original C-& menu and the
WAITING FOR CALL state. 

RETURNING TO DOS
Selecting "&" will leave the telephone line connected  and  cause  the
system to BOOT from DRIVE 1. 

TRANSFERRING FILES
To  transfer  files, one of you must take control of the total system.
This means that one of you elects to become the "MASTER" and the other
end becomes the "SLAVE". To become  the  MASTER,  type  "M"  from  the
FUNCTION  mode  and  if you succeed in becoming MASTER the REMOTE menu
will be replaced by the message:-

[CONTROLLED BY REMOTE]


You will be presented with the S-R-E menu:-

S .... SEND LOCAL FILES

R .... RECEIVE REMOTE FILES

E .... EXIT MASTER MODE


You can toggle between CHAT and FUNCTION mode at any  time,  but  when
ready to select from the menu, you must be in FUNCTION mode. 

Selecting  the "E" menu item will relinquish MASTER control and return
both APPLES to the M-$-& menu. 

SELECTING FILES FOR TRANSFER
Insert into DRIVE 1 any disk that contains files to  be  sent  or  has
space  for  files  to be received and select "S" or "R" from the menu.
The APPLE that holds the files to be sent will read the  CATALOG  from
its  disk  and  send  a  copy  to the other APPLE. When both ends have
copies of the CATALOG displayed, the MASTER end can select  the  files
to  be transferred. This is done by moving the selection cursor up and
down the screen with the < and > (or , and .) keys while  in  FUNCTION
mode. The MASTER end toggles the file selection with the SPACE bar and
both  ends can see which files have been selected. When ready to start
the file transfer, type CONTROL-C. 

While your disk is actually being accessed, you will  be  barred  from
using   the   keyboard,   but  at  all  other  times,  including  file
transmission, you may select CHAT mode and  converse  with  the  other
end. 

WATCHING THE DATA GO BY
There  are three display screens supported by DFX. They are called the
MENU, UTILITY and the GRAPHIC screens. You may switch from the current
MENU screen to either the UTILITY or GRAPHIC screen at any  time.  The
ESC  key  toggles  your APPLE between the three screens and the STATUS
line shows a U, G or M so that you know where you are.  You  can  even
see  which  screen the REMOTE is currently selecting by looking at the
left side of the STATUS line. 

THE UTILITY SCREEN
This shows the Receive and Transmit data streams and an  extension  of
the  CHAT scroll area. In FUNCTION mode, the < and > (or , and .) keys
move the small arrow  under  the  data  stream  left  and  right.  The
hexadecimal  values  of  the  two indicated data stream characters are
displayed at the right. A count of the total characters  Received  and
Transmitted is displayed on the left. 

THE GRAPHIC SCREEN
The GRAPHIC screen shows 32 blocks of any file in transit.  If it is a
HIRES  picture  file,  the  sender will see the picture as loaded from
disk, while the receiver will see it slowly appear. There are no valid
FUNCTION mode keys while using the GRAPHIC screen. 


ERROR HANDLING
--------------

FAILURE TO GAIN MASTER CONTROL
If you both managed to type "M" almost simultaneously while attempting
to become MASTER, then you will both get  a  NOT  ACCEPTED  BY  REMOTE
message. 

If you have placed a call to another computer that is not running DFX,
then  you  will  get  the  NOT ACCEPTED BY REMOTE message after typing
"M". 

DISK ERRORS
If disk errors occur, both ends will be informed by a message  at  the
top  of  the MENU screen. The MASTER end will be asked to type a SPACE
in FUNCTION mode to terminate the file transfer and  the  system  will
reset to the S-R-E menu. 

TRANSMISSION ERRORS
During  file  transmission,  each  block  of  256 bytes has a checksum
appended so if line errors occur, the  checksum  will  not  match  the
receivers  calculated  checksum.  A RESEND PREVIOUS BLOCK signal (NAK)
will be returned by  the  receiver  and  the  block  will  be  resent.
However, no error correction is applied to the CHAT sequences.


INTERUPTION OF FILE TRANSFER
Once  a  selection  of  files  has been made and transmission started,
either end may ABORT the process without dropping the telephone  line.
Select  the  UTILITY  screen,  FUNCTION mode and type SHIFT-CONTROL-P.
This will signal the REMOTE APPLE to close any open files  and  return
to  the  M-$-&  menu.  If successful, the LOCAL APPLE will then do the
same. If either APPLE was in the middle of a disk access at the  time,
you may have to repeat the sequence again. 


LIMITATIONS
-----------

* All disk functions refer to DRIVE 1. 

* The HAYES MICROMODEM II must be in slot 2. 

*  All  files must be in standard DOS 3.3 format. (APPLESOFT, INTEGER,
BINARY or TEXT). 

* If the sender's CATALOG has more than 38 files, only  the  first  38
will be displayed for possible transfer. 

*  If  the  sender's  CATALOG has more than 19 files, the display will
show all file names truncated after the 12th character.  However,  the
file names up to the 30th character are still used internally. 

*  At  least  one  end must be running an original DFX PRIMARY DISK as
provided by ARROW MICRO SOFTWARE. The other end  may  be  a  SECONDARY
copy produced by any suitable file copy program, bit copier, or by the
DFX PULL-THROUGH (DPT) utility. If you attempt to run SECONDARY copies
of  DFX  in both APPLES, you will be permitted to place the call, CHAT
and select files; but you will not be permitted to transfer any files.
The slowly flashing "*" at the centre of the STATUS  line  will  break
into  a  fast  flash if both ends are running SECONDARY copies of DFX.
Also, the message:-

[NO PRIMARY DFX DISK]

will be displayed when you enable the M-$-& or  S-R-E  menu.   If  you
attempt  to  transfer  files  between two SECONDARY copies of DFX, you
will be forced to press RESET which will drop the line and reboot. 


INTERNALS
---------

DFX is a small APPLESOFT program that loads and executes  four  binary
program segments. 

MODEMSUB.OBJ  is the operating system that supports the three screens,
CHAT-FUNCTION, STATUS display and modem. 

DFXAPPLN.OBJ is the File Transfer Application routine. 

DFXAPPLNMSG.OBJ contains all the messages for DFXAPPLN.OBJ. 

DFXGSODS.OBJ makes various modifications to DOS  3.3  and  initializes
all variables. It then evaporates. 

DFXDOCUMENTATION is a formatted text file of this documentation. 

DOC  is  a rather slow and simple minded APPLESOFT program that prints
the DOCUMENTATION file to a printer in slot 1. 

DPT is an APPLESOFT program that will send a copy of the DFX files  to
a REMOTE. 

GETTING OUT OF DFX
When  exiting  from  DFX,  it is necessary to reboot the system with a
more normal DOS 3.3. The "&" character has been  chosen  as  the  menu
selection  character  because it requires a SHIFT and "&" key to reach
it.  This helps avoid accidental reboots. Likewise,  the  "$"  key  is
used  in  the M-$-& menu to hangup the line. Even then, you must be in
FUNCTION mode. 

CHAT AND FILE TRANSMISSION
The CHAT mode can coexist with the file transfer because, as you  will
see  from  the  data stream on the UTILITY screen, all CHAT characters
are preceded by a special ESCAPE character ($FE). When a $FE is  found
in  the file data block, two of the special ESCAPE characters are sent
and treated as only one at the other end. 

WHEN THE DISK IS ACTIVE
The disk read and write routines  prevent  the  APPLE  processor  from
servicing  the  modem  for  short  periods.  In  order  to prevent any
characters from being lost, the REMOTE APPLE is sent a special  signal
to prevent it from sending until given a second GO AHEAD message after
the  disk  operation  is  finished.  During this "lockout" period, the
REMOTE  APPLE  will  buffer  any  CHAT  characters  and  delay   their
transmission until given the GO AHAEAD signal. 

DFX WITHOUT A TELEPHONE LINE
There  is  a  hidden  menu  character  in the C-& menu that will be of
interest to those users that have access to two  APPLES  in  the  same
room.  You  may connect the two modems directly, back-to-back, without
actually involving the telephone lines. To place a call, type "C"  and
at  least  one  digit  followed  by a <RETURN>. Since there is no ring
signal available to the answering machine, just type "P" (for  pickup)
and it will cycle through its answering program. 


MAKING COPIES OF DFX
--------------------

SECONDARY COPIES
All  the  files  on the DFX PRIMARY DISK may be copied to another disk
that has been initialized by the INIT program on the  DOS  3.3  SYSTEM
MASTER.  The  result  is  a Secondary copy of DFX.  The SECONDARY copy
will inherit the same serial number as the original DFX disk  but  the
letter  "S"  will  be  seen  to  be  appended.   (The serial number is
displayed at the bottom left of the screen before any  call  has  been
placed.)  You  may make and distribute as many SECONDARY copies of DFX
as you please, but remember that to be able to transmit files, one  of
the  two  APPLES  must  be loaded from an original PRIMARY copy of DFX
which is obtainable from ARROW MICRO SOFTWARE. 

DFX PULL-THROUGH
There is a utility program called DFX PULL-THROUGH (DPT)  on  the  DFX
PRIMARY  DISK  which  will  let  you  send  a SECONDARY copy of DFX to
another APPLE by using the neat facilities of the HAYES MICROMODEM  II
ROM. Here is what you do:-

Call the user at the other end and tell him to BOOT the DOS 3.3 SYSTEM
MASTER DISK. He should then remove the disk and insert a write enabled
blank  disk  into  drive  1.  Warn  him  that  this  disk will soon be
initialized and all existing files erased. 

THE PULL-THROUGH CALL
Now you must get your APPLES connected together in the standard way as
described in the HAYES MICROMODEM II manual. That is:-

Let him type IN#2 <RETURN> so that you may place the call. 

Now  you  type  IN#2  <RETURN>,   control-A,   control-H,   control-A,
control-Q.   Enter  the  telephone  number  of  the  other  APPLE  and
<RETURN>. 

When the connection has been established, type control-A, control-X to
exit from TERMINAL MODE and then RUN DPT. 

Sit back and watch for about 8 3/4 minutes. 

WHEN DPT FINISHES
He should now have a SECONDARY copy of the DFX files on his  disk  and
DFX should be up and running on both APPLES. 

If  all goes well, your DFX will be running a few seconds ahead of his
and you will see his CHAT status "C" appear when his DFX starts up. It
is now safe to chat to him. If you start chatting too soon, his system
may hangup the line because he sees strange bits on the line while  he
is testing the connection. 


SENDING THE REST OF THE DFX FILES
To  complete the SECONDARY DFX file complement, you should now use DFX
to send him the files called:- DOC, DFXDOCUMENTATION, ORDERING,  HELLO
and  DFX.   (HELLO and DFX are required to replace the temporary files
sent by DPT.)


COPYRIGHT
---------

This software product (DFX) is copyrighted and all rights are reserved
by ARROW MICRO SOFTWARE. The distribution and sale of this product are
intended for the use of the original purchaser only.  However,  lawful
users  of  this program are hereby licensed to execute the DPT program
to transmit a SECONDARY COPY of any of the DFX files  to  other  users
for the purpose of usefully executing the DFX program between APPLE II
computers. 

Note:   In  any  DFX to DFX communication, at least one end must run a
PRIMARY COPY of DFX to work correctly. 

No warranty, either expressed or implied, is made with respect to  any
part  of  this  software.  The  programs are sold "AS IS". In no event
shall AMS  be  liable  for  any  direct  or  indirect,  incidental  or
consequential  damages  resulting  from  any  defect  in  the licensed
program. 


 
